# ========================================
# 飞书 Claude CLI 对话机器人配置示例
# ========================================
# 使用方法：
# 1. 复制此文件为 .env：cp .env.example .env
# 2. 填写你的实际配置值
# 3. Windows 用户注意路径格式（使用反斜杠或正斜杠都可以）
# ========================================

# ==================== 飞书应用配置 ====================
# 飞书开放平台：https://open.feishu.cn/
# 应用凭证获取路径：开放平台 -> 你的应用 -> 凭证与基础信息
FEISHU_APP_ID=cli_xxxxxxxx
FEISHU_APP_SECRET=your_app_secret_here

# ==================== Claude CLI 配置 ====================
# Claude CLI 可执行文件路径（可选）
# 如果 claude 命令在 PATH 中，可以不配置此项
# macOS/Linux（通过 npm 安装）：
#   ~/.npm-global/bin/claude
#   /usr/local/bin/claude
# Windows（通过 npm 安装）：
#   C:\Users\YourName\AppData\Roaming\npm\claude.cmd
# CLAUDE_CLI_PATH=claude

# Anthropic API 配置（必需）
# API Key 和 Auth Token 获取：https://console.anthropic.com/
ANTHROPIC_API_KEY=your_api_key_here
ANTHROPIC_AUTH_TOKEN=your_auth_token_here
ANTHROPIC_BASE_URL=https://api.anthropic.com

# Claude Code 特性开关（可选）
CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC=true
CLAUDE_CODE_ENABLE_UNIFIED_READ_TOOL=true

# ==================== 日志配置 ====================
# 日志级别: debug, info, warn, error
# debug: 详细调试信息（开发环境推荐）
# info: 一般信息（生产环境推荐）
LOG_LEVEL=info

# ==================== 流式输出配置 ====================
# 注意：以下参数在代码中统一管理，无需在 .env 中配置
# 如需调整，请修改 internal/utils/timeout.go 中的 DefaultTimeoutConfig()
#
# 当前默认值：
# - 空闲超时（StreamIdleTimeout）：8 秒
#   含义：Claude 停止输出 8 秒后，自动发送已缓冲内容
#   作用：平衡响应速度和 API 调用次数
#
# - 最大持续时间（StreamMaxDuration）：20 秒
#   含义：连续输出 20 秒后，强制分段发送
#   作用：防止单条消息过大，超过飞书 150KB 限制
#
# - 最大缓冲区（StreamMaxBufferSize）：30000 字符
#   含义：缓冲区超过 30000 字符时，强制分段
#   作用：防止超过飞书消息大小限制
#
# 调优建议：
# - 减少 API 调用：增大 StreamIdleTimeout（如 10-15 秒）
# - 更快响应：减小 StreamIdleTimeout（如 3-5 秒）
# - 更长分段：增大 StreamMaxDuration（如 30 秒）
# - 防止超限：减小 StreamMaxBufferSize（如 20000）

# ==================== 跨平台部署说明 ====================
# macOS/Linux 部署：
#   1. 复制配置：cp .env.example .env
#   2. 填写配置值
#   3. 启动：./scripts/start-bot.sh
#
# Windows 部署：
#   1. 复制配置：copy .env.example .env
#   2. 填写配置值（注意路径格式）
#   3. 启动：scripts\start-bot.bat
#
# 路径格式示例：
#   macOS/Linux: ~/.feishu-bot/projects.json
#   Windows: C:\Users\YourName\.feishu-bot\projects.json
#   Windows (正斜杠也可以): C:/Users/YourName/.feishu-bot/projects.json
